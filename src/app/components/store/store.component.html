<br>
<div *ngIf = 'user' class = 'w-75 text-center' style = 'margin-left: 12.5vw;'>

  <div *ngIf = 'store'>


    <h1>Welcome to {{store.sName}}    </h1>

    <div *ngIf = "user.uType === 'manager'">
      <mat-form-field *ngIf = 'allItems' appearance = 'outline'>
        <mat-label>Add Item to Store</mat-label>
        <mat-select [(ngModel)] = 'newItem' name = 'newItem'>
          <mat-option [value] = 'null'>Add a new Item to Store</mat-option>
          <mat-option *ngFor = 'let item of getAvailableItems()'
                      [value] = 'item'>
            {{item.iName}} - {{item.iCategory}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      &nbsp;
      <button (click) = 'addItemToStore(newItem)' [disabled] = '!newItem'
              color = 'accent'
              mat-icon-button
              matTooltip = 'Add New Item to Store'>
        <mat-icon>add_box</mat-icon>
      </button>
      <hr>
    </div>
    <mat-form-field appearance = 'outline'>
      <mat-label>Category</mat-label>
      <mat-select [(ngModel)] = 'category'>
        <mat-option [value] = '""'>All</mat-option>
        <mat-option *ngFor = 'let cat of categories' [value] = 'cat'>{{cat | titlecase}}</mat-option>
      </mat-select>
    </mat-form-field>

    &nbsp;

    <mat-form-field appearance = 'outline' class = 'w-50'>
      <mat-label>Search item...</mat-label>
      <input (keypress) = '$event.key === "Enter" ? search(false): ""' (keyup) = 'search(false)'
             [(ngModel)] = 'itemName'
             matInput
             placeholder = 'Item Name'>
      <mat-icon (click) = 'search(false)' class = 'search-icon' matSuffix>search</mat-icon>
    </mat-form-field>

    <hr>
    <mat-card *ngIf = 'this.getSuggestions()?.length> 0 && this.category?.length === 0 && this.itemName?.length === 0'>
      <mat-card-title>
        Suggested Item...
      </mat-card-title>
      <hr>
      <div class = 'suggested-container'>
        <div *ngFor = 'let item of getSuggestions()' class = 'col' style = 'padding-bottom: 8px'>
          <app-item-card
            [item] = 'item'
            [store] = 'store'
            [user] = 'user'>
          </app-item-card>
        </div>
      </div>
    </mat-card>

    <hr>

    <mat-card *ngIf = 'this.getSaleItems()?.length> 0 && this.category?.length === 0 && this.itemName?.length === 0'>
      <mat-card-title>
        ON SALE
      </mat-card-title>
      <hr>
      <div *ngFor = 'let row of getRows(getSaleItems().length)'
           [style] = '"max-width: "+getSaleItems(row).length * 25+"%"'
           class = 'sale-container'>
        <div *ngFor = 'let item of getSaleItems(row)' class = 'col'
             style = 'padding-bottom: 8px;'>
          <app-item-card
            [item] = 'item'
            [store] = 'store'
            [user] = 'user'>
          </app-item-card>
        </div>
      </div>
    </mat-card>
    <hr>


    <div *ngFor = 'let row of getRows(search(false ).length)'
         [style] = '"max-width: " + search(false, row).length * 25 +"%;  overflow-x: auto;"'
         class = 'row text-center suggested-container'>
      <div *ngFor = 'let item of search(false, row)' class = 'col' style = 'margin-bottom: 16px;'>
        <app-item-card [item] = 'item' [store] = 'this.store' [user] = 'this.user'></app-item-card>
      </div>
    </div>

  </div>
</div>
